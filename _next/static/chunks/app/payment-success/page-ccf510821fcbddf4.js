(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[885],{1878:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(5155),i=s(2115),o=s(5695),a=s(5518),l=s(4733);function n(){let e=(0,o.useRouter)(),[t,s]=(0,i.useState)("processing");return(0,i.useEffect)(()=>{(async()=>{try{let e=sessionStorage.getItem("pendingBooking");if(!e){console.warn("No pending booking found"),s("success");return}let t=JSON.parse(e),r={...t,subject:"【予約確定・決済完了】".concat(t.course_name," - ").concat(t.from_name,"様")};await a.Ay.send(l.fr,l.UE,r,l.jE),sessionStorage.removeItem("pendingBooking"),s("success")}catch(e){console.error("Failed to send confirmation email:",e),s("error")}})()},[]),(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",children:["processing"===t&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"処理中..."}),(0,r.jsx)("p",{className:"text-gray-600",children:"確認メールを送信しています"})]}),"success"===t&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"\uD83C\uDF89 お支払いが完了しました！"}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6 text-left",children:[(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"✅ ご予約が確定いたしました"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"\uD83D\uDCE7 確認メールをお送りしました"}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:"\uD83D\uDCDE 24時間以内に詳細をご連絡いたします"})]}),(0,r.jsx)("button",{onClick:()=>e.push("/english"),className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors",children:"コース一覧に戻る"})]}),"error"===t&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"bg-yellow-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"お支払いは完了しました"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"確認メールの送信に失敗しましたが、ご予約は正常に受け付けております。 24時間以内に直接ご連絡させていただきます。"}),(0,r.jsx)("button",{onClick:()=>e.push("/english"),className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors",children:"コース一覧に戻る"})]})]})})}},4733:(e,t,s)=>{"use strict";s.d(t,{UE:()=>i,fr:()=>r,jE:()=>a,wP:()=>o});let r="service_mvj6kjl",i="template_8l3j228",o="template_ihn0p5u",a="6QoeQf_j3aOl01Tut"},5518:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>p});class r{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}let i={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},o=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},a=async(e,t,s={})=>{let o=await fetch(i.origin+e,{method:"POST",headers:s,body:t}),a=await o.text(),l=new r(o.status,a);if(o.ok)return l;throw l},l=(e,t,s)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||"string"!=typeof s)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},n=e=>e.webdriver||!e.languages||0===e.languages.length,c=()=>new r(451,"Unavailable For Headless Browser"),d=(e,t)=>{if((e=>!e.list?.length||!e.watchVariable)(e))return!1;var s=e.list,r=e.watchVariable;if(!Array.isArray(s))throw"The BlockList list has to be an array";if("string"!=typeof r)throw"The BlockList watchVariable has to be a string";let i=((e,t)=>e instanceof FormData?e.get(t):e[t])(t,e.watchVariable);return"string"==typeof i&&e.list.includes(i)},m=()=>new r(403,"Forbidden"),u=async(e,t,s)=>{let r=Number(await s.get(e)||0);return t-Date.now()+r},h=async(e,t,s)=>{if(!t.throttle||!s)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);let r=t.id||e;return await u(r,t.throttle,s)>0||(await s.set(r,Date.now().toString()),!1)},b=()=>new r(429,"Too Many Requests"),p={init:(e,t="https://api.emailjs.com")=>{if(!e)return;let s=o(e);i.publicKey=s.publicKey,i.blockHeadless=s.blockHeadless,i.storageProvider=s.storageProvider,i.blockList=s.blockList,i.limitRate=s.limitRate,i.origin=s.origin||t},send:async(e,t,s,r)=>{let u=o(r),p=u.publicKey||i.publicKey,g=u.blockHeadless||i.blockHeadless,f=u.storageProvider||i.storageProvider,x={...i.blockList,...u.blockList},w={...i.limitRate,...u.limitRate};return g&&n(navigator)?Promise.reject(c()):(l(p,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(s),s&&d(x,s))?Promise.reject(m()):await h(location.pathname,w,f)?Promise.reject(b()):a("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:p,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"})},sendForm:async(e,t,s,r)=>{let u=o(r),p=u.publicKey||i.publicKey,g=u.blockHeadless||i.blockHeadless,f=i.storageProvider||u.storageProvider,x={...i.blockList,...u.blockList},w={...i.limitRate,...u.limitRate};if(g&&n(navigator))return Promise.reject(c());let j=(e=>"string"==typeof e?document.querySelector(e):e)(s);l(p,e,t),(e=>{if(!e||"FORM"!==e.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"})(j);let y=new FormData(j);return d(x,y)?Promise.reject(m()):await h(location.pathname,w,f)?Promise.reject(b()):(y.append("lib_version","4.4.1"),y.append("service_id",e),y.append("template_id",t),y.append("user_id",p),a("/api/v1.0/email/send-form",y))},EmailJSResponseStatus:r}},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},8947:(e,t,s)=>{Promise.resolve().then(s.bind(s,1878))}},e=>{e.O(0,[441,964,358],()=>e(e.s=8947)),_N_E=e.O()}]);